import 'dart:math';

import 'package:flutter/material.dart';

/// The Werkbank logo as a widget.
class WerkbankLogo extends StatelessWidget {
  const WerkbankLogo({
    super.key,
    this.color,
    this.size = const Size.square(64),
  });

  final Color? color;
  final Size size;

  @override
  Widget build(BuildContext context) {
    final effectiveColor =
        color ??
        switch (Theme.of(context).brightness) {
          Brightness.light => const Color(0xff303030),
          Brightness.dark => const Color(0xffF5F5F5),
        };
    return CustomPaint(
      size: size,
      painter: _WerkbankLogoPainter(
        color: effectiveColor,
      ),
    );
  }
}

class _WerkbankLogoPainter extends CustomPainter {
  _WerkbankLogoPainter({required this.color});

  final Color color;

  @override
  void paint(Canvas canvas, Size size) {
    final path = Path()
      ..moveTo(8.0000123, 4)
      ..cubicTo(5.784013399999999, 4, 4, 5.7840162, 4, 8.0000185)
      ..lineTo(4, 18.423941)
      ..lineTo(31.011127, 45.435112000000004)
      ..cubicTo(
        31.794601,
        46.218588000000004,
        31.794601,
        47.480019000000006,
        31.011127,
        48.263495000000006,
      )
      ..lineTo(29.597002, 49.67775100000001)
      ..cubicTo(
        28.813527999999998,
        50.46122700000001,
        27.551969,
        50.46122700000001,
        26.768495,
        49.67775100000001,
      )
      ..lineTo(4, 26.90922000000001)
      ..lineTo(4, 55.999981000000005)
      ..cubicTo(
        4,
        58.21598300000001,
        5.7840134,
        60.00000000000001,
        8.0000123,
        60.00000000000001,
      )
      ..lineTo(55.999899, 60.00000000000001)
      ..cubicTo(
        58.215897999999996,
        60.00000000000001,
        59.999913,
        58.21598300000001,
        59.999913,
        55.999981000000005,
      )
      ..lineTo(59.999913, 36.245352000000004)
      ..lineTo(46.567534, 49.677751)
      ..arcToPoint(
        const Offset(43.739028000000005, 49.677751),
        radius: const Radius.elliptical(1.9999974, 2.0000005),
      )
      ..lineTo(16.869105000000005, 22.807658)
      ..arcToPoint(
        const Offset(16.869105000000005, 19.979274),
        radius: const Radius.elliptical(1.9999966, 1.9999998),
      )
      ..lineTo(22.525863000000005, 14.322378)
      ..arcToPoint(
        const Offset(25.354243000000004, 14.322378),
        radius: const Radius.elliptical(1.9999991, 2.0000023),
      )
      ..lineTo(26.061305000000004, 15.029442000000001)
      ..lineTo(23.940117000000004, 17.150762)
      ..cubicTo(
        23.548380000000005,
        17.542499,
        23.548380000000005,
        18.173280000000002,
        23.940117000000004,
        18.565018000000002,
      )
      ..lineTo(24.647179000000005, 19.272082)
      ..cubicTo(
        25.038915000000006,
        19.663819,
        25.669695000000004,
        19.663819,
        26.061432000000003,
        19.272082,
      )
      ..lineTo(28.182748000000004, 17.150891)
      ..lineTo(30.304065000000005, 19.272082)
      ..lineTo(29.596875000000004, 19.979274)
      ..cubicTo(
        29.205138000000005,
        20.371012,
        29.205138000000005,
        21.001664,
        29.596875000000004,
        21.393401,
      )
      ..lineTo(30.304065000000005, 22.100594)
      ..cubicTo(
        30.695802000000004,
        22.492332,
        31.326454000000005,
        22.492332,
        31.718191000000004,
        22.100594,
      )
      ..lineTo(32.425254, 21.393401)
      ..lineTo(34.546697, 23.514721)
      ..lineTo(32.425381, 25.636041000000002)
      ..cubicTo(
        32.033646000000005,
        26.027779000000002,
        32.033516,
        26.65856,
        32.425254,
        27.050298,
      )
      ..lineTo(33.132446, 27.757491)
      ..cubicTo(
        33.524181,
        28.149226000000002,
        34.154963,
        28.149098000000002,
        34.546697,
        27.757361000000003,
      )
      ..lineTo(36.667886, 25.636041000000002)
      ..lineTo(38.78933, 27.757491)
      ..lineTo(38.082141, 28.464554000000003)
      ..cubicTo(
        37.690403,
        28.856292000000003,
        37.690403,
        29.486942000000003,
        38.082141,
        29.878680000000003,
      )
      ..lineTo(38.78933, 30.585873000000003)
      ..cubicTo(
        39.181067999999996,
        30.977611000000003,
        39.81172,
        30.977611000000003,
        40.203457,
        30.585873000000003,
      )
      ..lineTo(40.910647, 29.878680000000003)
      ..lineTo(43.028735999999995, 31.99677)
      ..lineTo(43.031836, 31.99997)
      ..lineTo(40.910647, 34.12129)
      ..cubicTo(
        40.518912,
        34.513028,
        40.518912,
        35.143808,
        40.910647,
        35.535546000000004,
      )
      ..lineTo(41.617712, 36.242610000000006)
      ..cubicTo(
        42.009446,
        36.634347000000005,
        42.640229,
        36.634347000000005,
        43.031963,
        36.242610000000006,
      )
      ..lineTo(45.153279999999995, 34.12142000000001)
      ..lineTo(47.274598999999995, 36.242610000000006)
      ..cubicTo(
        47.66633399999999,
        36.634347000000005,
        48.296983,
        36.634477000000004,
        48.688722999999996,
        36.242740000000005,
      )
      ..lineTo(49.395914999999995, 35.535546000000004)
      ..cubicTo(
        49.78764999999999,
        35.14380800000001,
        49.78752299999999,
        34.513155000000005,
        49.395785,
        34.12142,
      )
      ..lineTo(47.274598999999995, 32.0001)
      ..lineTo(47.27579899999999, 31.998900000000003)
      ..lineTo(49.39595299999999, 29.878743000000004)
      ..lineTo(50.10301499999999, 30.585806000000005)
      ..cubicTo(
        50.49475199999999,
        30.977544000000005,
        51.12553199999999,
        30.977674000000004,
        51.51726899999999,
        30.585936000000004,
      )
      ..lineTo(52.22445899999999, 29.878743000000004)
      ..cubicTo(
        52.61619599999999,
        29.487005000000003,
        52.61606899999999,
        28.856224000000005,
        52.22433099999999,
        28.464486000000004,
      )
      ..lineTo(51.51726899999999, 27.757424000000004)
      ..lineTo(53.63871299999999, 25.636104000000003)
      ..lineTo(55.75990199999999, 27.757424000000004)
      ..cubicTo(
        56.15163699999999,
        28.149161000000003,
        56.78241899999999,
        28.149161000000003,
        57.17415399999999,
        27.757424000000004,
      )
      ..lineTo(57.881345999999986, 27.050360000000005)
      ..cubicTo(
        58.273082999999986,
        26.658623000000006,
        58.27295299999999,
        26.027842000000003,
        57.88121899999999,
        25.636104000000003,
      )
      ..lineTo(55.75990199999999, 23.514784000000002)
      ..lineTo(57.88121899999999, 21.393464)
      ..lineTo(58.58828099999999, 22.100527000000003)
      ..cubicTo(
        58.97915299999999,
        22.491402000000004,
        59.60802799999999,
        22.492263000000005,
        59.99994999999999,
        22.103127000000004,
      )
      ..lineTo(59.99994999999999, 8.000054800000004)
      ..cubicTo(
        59.99994999999999,
        5.784052400000005,
        58.21593599999999,
        4.000036300000004,
        55.99993699999999,
        4.000036300000004,
      )
      ..close();

    final paint = Paint()..color = color;
    const pathSize = 64;
    final squareSize = min(size.width, size.height);
    canvas.translate(
      (size.width - squareSize) / 2,
      (size.height - squareSize) / 2,
    );
    final scale = squareSize / pathSize;
    canvas
      ..scale(scale)
      ..drawPath(path, paint);
  }

  @override
  bool shouldRepaint(_WerkbankLogoPainter oldDelegate) {
    return oldDelegate.color != color;
  }
}
